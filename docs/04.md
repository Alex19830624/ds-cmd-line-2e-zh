# 1 简介

> 原文：<https://datascienceatthecommandline.com/2e/chapter-1-introduction.html>

这本书是关于在命令行上做数据科学的。我的目标是通过教您如何利用命令行的力量，使您成为一名更高效和多产的数据科学家。

在标题中同时使用术语*数据科学*和*命令行*需要解释一下。一项超过 50 年历史的技术怎么可能对一个只有几年历史的领域有用呢？

今天，数据科学家可以从大量激动人心的技术和编程语言中进行选择。Python、R、Julia 和 Apache Spark 只是几个例子。你可能已经有一个或多个这方面的经验。如果是，那你为什么还要在意做数据科学的命令行呢？命令行有什么是其他技术和编程语言所没有的？

这些都是有效的问题。在这第一章中，我将如下回答这些问题。首先，我提供了数据科学的实用定义，这将成为本书的主干。其次，我将列出命令行的五个重要优点。在这一章结束时，我希望能够让你相信命令行对于从事数据科学确实是值得学习的。

## 1.1 数据科学是 OSEMN

数据科学领域仍处于起步阶段，因此，它所包含的内容有各种定义。在本书中，我使用了希拉里·梅森和克里斯·h·威金斯的非常实用的定义。他们按照以下五个步骤定义数据科学:(1)获取数据，(2)擦洗数据，(3)探索数据，(4)建模数据，(5)解释数据。这些步骤共同构成了 OSEMN 模型(发音为 *awesome* )。这个定义是本书的主干，因为每一步(除了第 5 步，解释数据，我将在下面解释)都有自己的章节。

虽然这五个步骤是以线性和递增的方式讨论的，但实际上在它们之间来回移动或同时执行多个步骤是非常常见的。图 [1.1](chapter-1-introduction.html#fig:diagram-osemn) 说明了做数据科学是一个迭代的非线性过程。例如，一旦对数据进行建模并查看结果，您可能会决定返回到清理步骤来调整数据集的要素。

![Doing data science is an iterative and non-linear process](img/263d7f17e61142b5cc1a8e1ab8620cdf.png)

图 1.1:从事数据科学是一个迭代的非线性过程 

下面我解释每一步需要什么。

### 1.1.1 获取数据

没有任何数据，你就没有什么数据科学可做。所以第一步是获取数据。除非您足够幸运已经拥有数据，否则您可能需要执行以下一项或多项操作:

*   从另一个位置(例如，网页或服务器)下载数据
*   从数据库或 API(如 MySQL 或 Twitter)查询数据
*   从另一个文件(例如，HTML 文件或电子表格)中提取数据
*   自己生成数据(例如，读取传感器或进行调查)

在第 3 章中，我讨论了几种使用命令行获取数据的方法。获得的数据很可能是纯文本、CSV、JSON、HTML 或 XML 格式。下一步是清除这些数据。

### 1.1.2 擦洗数据

获得的数据有缺失值、不一致、错误、奇怪的字符或不感兴趣的列的情况并不少见。在这种情况下，你必须*清除*数据，然后才能对它做任何有趣的事情。常见的擦洗操作包括:

*   过滤线
*   提取某些列
*   替换值
*   提取单词
*   处理缺失值和重复值
*   将数据从一种格式转换为另一种格式

虽然我们数据科学家喜欢创建令人兴奋的数据可视化和有洞察力的模型(步骤 3 和 4)，但通常首先要花费大量精力来获取和清理所需的数据(步骤 1 和 2)。在*数据柔术*，，[DJ Patil](#ref-Patil2012)中指出“任何数据项目中 80%的工作都是在清理数据。”在第 5 章的[中，我演示了命令行如何帮助完成这样的数据清理操作。](chapter-5-scrubbing-data.html#chapter-5-scrubbing-data)

### 1.1.3 探索数据

清理完数据后，您就可以开始研究它了。这就是有趣的地方，因为当你探索时，你将真正了解你的数据。在第 7 章中，我将向您展示如何使用命令行来:

*   看看你的数据
*   从您的数据中获取统计数据
*   创建有洞察力的可视化

[第七章](chapter-7-exploring-data.html#chapter-7-exploring-data)中介绍的命令行工具有:`csvstat`  和`rush`。

### 1.1.4 建模数据

如果您想要解释数据或预测将会发生什么，您可能想要创建数据的统计模型。创建模型的技术包括聚类、分类、回归和降维。命令行不适合从头开始编写新类型的模型。然而，能够从命令行构建模型是非常有用的。在第 9 章中，我将介绍几个命令行工具，它们要么在本地构建模型，要么使用 API 在云中执行计算。

### 1.1.5 解释数据

OSEMN 模型的最后一步，也可能是最重要的一步是解释数据。这一步骤包括:

*   从你的数据中得出结论
*   评估你的结果意味着什么
*   传达您的结果

说实话，电脑在这里用处不大，命令行在这个阶段并没有真正发挥作用。一旦你走到这一步，就看你自己了。这是 OSEMN 模型中唯一没有自己章节的步骤。相反，我建议你参考《用数据思考》这本书*作者[Max Shron](#ref-Shron2014)。*

 *## 1.2 间奏曲章节

除了涵盖奥赛曼步骤的章节外，还有四个间奏曲章节。每一篇都讨论了一个关于数据科学的更一般的主题，以及如何使用命令行。这些主题适用于数据科学过程中的任何步骤。

在第 4 章中，我将讨论如何为命令行创建可重用的工具。这些个人工具既可以来自您在命令行上键入的长命令，也可以来自您用 Python 或 r 编写的现有代码。能够创建自己的工具使您变得更加高效和多产。

因为命令行是进行数据科学的交互式环境，所以跟踪您的工作流会变得很有挑战性。在第 6 章的[中，我展示了一个名为`make`的命令行工具，它允许你根据任务和它们之间的依赖关系来定义你的数据科学工作流。该工具不仅为您，也为您的同事和同行提高了工作流程的可重复性。](chapter-6-project-management-with-make.html#chapter-6-project-management-with-make)

在第 8 章中，我解释了如何通过并行运行来加速你的命令和工具。使用名为 GNU Parallel的命令行工具，您可以将命令行工具应用于非常大的数据集，并在多核甚至远程机器上运行它们。

在第 10 章中，我将讨论如何在其他环境和编程语言中使用命令行的强大功能，比如 R、RStudio、Python、Jupyter Notebooks，甚至 Apache Spark。

## 1.3 什么是命令行？

在我讨论*为什么*您应该将命令行用于数据科学之前，让我们先来看看*命令行实际上是什么样子的*(您可能已经很熟悉了)。图 [1.2](chapter-1-introduction.html#fig:mac-terminal) 和图 [1.3](chapter-1-introduction.html#fig:ubuntu-terminal) 分别显示了默认情况下在 macOS 和 Ubuntu 上出现的命令行截图。Ubuntu 是 GNU/Linux 的一个特殊发行版，也是我将在本书中使用的版本。

![Command line on macOS](img/704a50618e2832956ff937d248db39df.png)

图 1.2:MAC OS 上的命令行 ![Command line on Ubuntu](img/a34c8398830a6171d2ab797b3607eb4c.png)

图 1.3:Ubuntu 上的命令行 

两张截图中显示的窗口称为*终端*。这是使您能够与 shell 交互的程序。是 shell 执行我输入的命令。在[第二章](chapter-2-getting-started.html#chapter-2-getting-started)中，我会更详细地解释这两个术语。

I’m not showing the Microsoft Windows command line (also known as the Command Prompt or PowerShell), because it’s fundamentally different and incompatible with the commands presented in this book. The good news is that you can install a Docker image on Microsoft Windows so that you’re able to follow along. How to install the Docker image is explained in [Chapter 2](chapter-2-getting-started.html#chapter-2-getting-started).

与通过图形用户界面 (GUI)相比，键入命令是一种非常不同的与计算机交互的方式。如果您通常习惯于在比如说 Microsoft Excel 中处理数据，那么这种方法一开始可能看起来有些吓人。不要害怕。相信我，当我说你会很快习惯在命令行工作。

在这本书里，我输入的命令和它们生成的输出显示为文本。例如，两个屏幕截图中的终端内容如下所示:

```sh
$ whoami
dst

$ date
Thu Mar  3 10:38:33 AM CET 2022

$ echo 'The command line is awesome!' | cowsay -f tux
 ______________________________
< The command line is awesome! >
 ------------------------------
   \
    \
        .--.
       |o_o |
       |:_/ |
      //   \ \
     (|     | )
    /'\_   _/`\
    \___)=(___/

$
```

您还会注意到每个命令前面都有一个美元符号( **`$`** )。这称为提示。两张截图中的提示显示了更多信息，即用户名、日期和一只企鹅。在示例中只显示美元符号是一种惯例，因为提示(1)可以在会话期间改变(当您转到不同的目录时)，(2)可以由用户定制(例如，它还可以显示时间或您正在处理的当前`git`  分支)，以及(3)与命令本身无关。

在下一章，我将更多地解释基本的命令行概念。现在是时候首先解释一下*为什么*您应该学习使用命令行进行数据科学研究了。

## 1.4 为什么数据科学在命令行？

命令行有许多很大的优势，可以真正让您成为一名更高效的数据科学家。粗略地将优势分组，命令行是:敏捷、扩充、可伸缩、可扩展和无处不在。我在下面详细阐述了每个优势。

### 1.4.1 命令行灵活

命令行的第一个优点是它允许您变得敏捷。数据科学具有很强的交互性和探索性，您的工作环境需要考虑到这一点。命令行通过两种方式实现这一点。

首先，命令行提供了一个所谓的*读取-评估-打印循环* (REPL)。这意味着你输入命令，按下 **`Enter`** ，命令立即被执行。与脚本、大型程序和 Hadoop 作业相关的编辑-编译-运行-调试循环相比，REPL 通常更便于进行数据科学研究。你的命令是立即执行的，可以随意停止，可以快速更改。这个短的迭代周期真的让你可以玩你的数据。

第二，命令行离文件系统很近。因为数据是数据科学的主要组成部分，所以能够轻松处理包含数据集的文件非常重要。命令行为此提供了许多方便的工具。

### 1.4.2 命令行增加

命令行与其他技术集成得很好。无论您的数据科学工作流目前包含什么技术(无论是 R、Python 还是 Excel)，请知道我并不是建议您放弃该工作流。相反，可以将命令行视为一种增强技术，它可以增强您当前正在使用的技术。它可以通过三种方式做到这一点。

首先，命令行可以充当许多不同数据科学工具之间的粘合剂。粘合工具的一种方法是将第一个工具的输出连接到第二个工具的输入。在第 2 章中，我解释了这是如何工作的。

其次，您通常可以从自己的环境中将任务委派给命令行。例如，Python、R 和 Apache Spark 允许您运行命令行工具并捕获它们的输出。我在第 10 章中用例子证明了这一点。

第三，您可以将您的代码(例如，Python 或 R script)转换成可重用的命令行工具。这样，用什么语言写就不再重要了。现在，可以从命令行直接使用它，或者从前面提到的与命令行集成的任何环境中使用它。我在第 4 章中解释了如何做到这一点。

最后，每种技术都有其优点和缺点，所以了解几种技术并使用最适合手头任务的技术是有好处的。有时这意味着使用 R，有时是命令行，有时甚至是笔和纸。到本书结束时，您将对何时应该使用命令行以及何时最好继续使用您最喜欢的编程语言或统计计算环境有一个坚实的理解。

### 1.4.3 命令行是可扩展的

正如我以前说过的，在命令行上工作与使用 GUI 有很大的不同。在命令行上，你通过输入来做事情，而在 GUI 上，你通过点击鼠标来做事情。

您在命令行上手动输入的所有内容也可以通过脚本和工具实现自动化。如果您犯了错误，输入数据发生了变化，或者因为您的同事想要执行相同的分析，这使得重新运行您的命令变得非常容易。此外，您的命令可以在特定的时间间隔运行，在远程服务器上运行，并在许多数据块上并行运行(更多信息请参见第 8 章)。

因为命令行是自动化的，所以它变得可伸缩和可重复。自动化指向和点击并不简单，这使得阿桂不太适合做可扩展和可重复的数据科学。

### 1.4.4 命令行可扩展

命令行本身是 50 多年前发明的。它的核心功能基本保持不变，但是它的*工具*，命令行的主力，每天都在开发。

命令行本身是语言无关的。这允许用许多不同的编程语言编写命令行工具。开源社区正在开发许多免费的高质量命令行工具，我们可以将它们用于数据科学。

这些命令行工具可以协同工作，这使得命令行非常灵活。您还可以创建自己的工具，允许您扩展命令行的有效功能。

### 命令行无处不在

因为命令行是任何类似 Unix 的操作系统自带的，包括 Ubuntu Linux 和 macOS，所以在很多地方都可以找到。另外，排名前 500 的超级计算机 100%都运行 Linux。因此，如果你曾经拥有过一台超级计算机(或者如果你曾经发现自己在侏罗纪公园里门锁坏了)，你最好知道如何使用命令行！

但是 Linux 不仅仅运行在超级计算机上。它也可以在服务器、笔记本电脑和嵌入式系统上运行。如今，许多公司都提供云计算，你可以很容易地在运行中推出新的机器。如果您曾经登录过这样的机器(或一般的服务器)，几乎可以肯定您将到达命令行。

同样重要的是要注意命令行不仅仅是一种宣传。这项技术已经存在了 50 多年，我相信它还会存在 50 年。因此，学习如何使用命令行(对于数据科学和一般情况)是一项值得的投资。

## 1.5 总结

在这一章中，我向你介绍了 OSEMN 数据科学模型，这是我在整本书中使用的指南。我提供了一些关于 Unix 命令行的背景知识，希望能让您相信这是一个适合从事数据科学的环境。在下一章，我将向您展示如何开始安装数据集和工具，并解释基本概念。

## 1.6 进行进一步探索

*   Brian W. Kernighan 所著的《Unix:历史和回忆录》讲述了 UNIX 的故事，解释了它是什么，它是如何开发的，以及它为什么重要。
*   2018 年，我在 Strata London 做了一个题为 *50 个学习 Shell 做数据科学的理由*的演讲。如果你需要更多的说服力，你可以[看看幻灯片](https://datascienceatthecommandline.com/resources/50-reasons.pdf)。
*   由 Max Shron 撰写的简短而甜蜜的书 *Thinking with Data* 侧重于 *why* 而不是 *how* ，并提供了一个框架来定义您的数据科学项目，这将帮助您提出正确的问题并解决正确的问题。*